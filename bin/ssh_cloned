#!/usr/bin/env ruby

####Required
require 'virtualman'

cloned_vms = load_conf["cloned_vms"]

cloned_vms.each do |vm|
	list << vm["name"]
end

puts "----SSH_cloned_VM----"
puts "Which VM do you want to ssh?"

chocie = Menu.unic_run(list)

selected_vm = Vm.new(choice)

puts "With which user? [root]"
user = Menu.ask

if user.empty?
	user = "root"
end

if !selected_vm.running?
	puts "#{selected_vm.name} is not running..."
	puts "Do you want to start it?"
	puts "yes/[no]"
	chocie = Menu.ask
	if choice == "yes"
		start_vm(selected_vm)
	else
		puts "As you want!"
		return 1
	end
end

cmd = "ssh #{user}@#{selected_vm.ip}"
exec (cmd)

puts "Thanks!"